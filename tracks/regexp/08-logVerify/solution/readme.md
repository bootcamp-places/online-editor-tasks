# logVerify

Розв'язання цієї задачі може виглядати ось так:

```js
const logVerify = (logs = "", userName = "") => {
  const re = new RegExp(`user_name:.*'${userName}'`, "g");
  const result = [];
  let match;
  while ((match = re.exec(logs)) !== null) {
    const line = logs.slice(match.index, logs.indexOf("\n", match.index));
    const ip = line.match(/(\d{1,3}\.){3}\d{1,3}|'[^']+'/);
    if (ip) {
      result.push(ip[0]);
    }
  }
  return result;
};
```

Давайте розглянемо цей код по крокам.

## Перший крок

Для початку створимо регулярний вираз, який буде шукати рядки, що містять `user_name:` та `userName`:

```js
const re = new RegExp(`user_name:.*'${userName}'`, "g");
```

Символ `.*` означає, що між `user_name:` та `userName` може бути будь-яка кількість символів. Це дозволяє нам шукати рядки, де `userName` знаходиться в будь-якому місці. Наприклад, якщо `userName` дорівнює `guest`, то регулярний вираз буде шукати рядки, що містять `user_name:guest` або `user_name:123guest` і т.д.

І створюємо масив, в який будемо записувати результати пошуку:

```js
const result = [];
```

## Другий крок

Тепер давайте розберемося, як шукати IP адресу. Для цього ми використаємо метод `exec` регулярного виразу. Цей метод повертає масив, де перший елемент - це знайдений рядок, а другий - це індекс, з якого починається знайдений рядок. Якщо рядок не знайдено, то метод поверне `null`.

```js
let match;
while ((match = re.exec(logs)) !== null) {
  // ...
}
```

## Третій крок

Тепер давайте знайдемо рядок, що містить IP адресу. Для цього ми використаємо метод `slice`, щоб витягнути рядок з логів. Індекс, з якого починається рядок, ми отримали в попередньому кроці. Індекс, де рядок закінчується, ми знаємо, оскільки рядок завжди закінчується символом нового рядка (`\n`).

```js
const line = logs.slice(match.index, logs.indexOf("\n", match.index));
```

## Четвертий крок

Тепер давайте знайдемо IP адресу в цьому рядку. Для цього ми використаємо метод `match`, щоб знайти рядок, що містить IP адресу. Індекс, де рядок закінчується, ми знаємо, оскільки рядок завжди закінчується символом нового рядка (`\d{1,3}\.){3}\d{1,3}`). Це для IPv4 адреси. Для IPv6 адреси використовується інший формат але в нашому випадку не потрібно для нього писати регулярний вираз, бо з умови завдання ми знаємо, що цей вираз завжди обрамлений одинарними лапками.

```js
const ip = line.match(/(\d{1,3}\.){3}\d{1,3}|'[^']+'/);
```

## П'ятий крок

Якщо IP адреса знайдена, то додамо її в масив результатів:

```js
if (ip) {
  result.push(ip[0]);
}
```

## Шостий крок

Повернемо масив результатів:

```js
return result;
```



## Корисні посилання

- [Wikipedia: IP-адреса](https://uk.wikipedia.org/wiki/IP-адреса)
- [Wikipedia: IPv4](https://uk.wikipedia.org/wiki/IPv4)
- [Wikipedia: IPv6](https://uk.wikipedia.org/wiki/IPv6)
- [Wikipedia: Регулярні вирази](https://uk.wikipedia.org/wiki/Регулярні_вирази)
- [MDN: RegExp](https://developer.mozilla.org/uk/docs/Web/JavaScript/Reference/Global_Objects/RegExp)
