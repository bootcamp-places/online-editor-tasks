# logConverting

> Author: [merezhanyi-eleks](https://github.com/merezhanyi-eleks)

Ця задача є продовженням [basic/logMonitoring](js-track/basic/logMonitoring).

Ви працюєте над сервісом моніторінгу хмари серверів. Вам необхідно написати проміжний обробник логу з сервера, який передає зконвертовану інформацію на сервіс візуалізації, який будує графіки критичних помилок на серверах. Данні з сервера приходять у вигляді строки, а сервіс візуалізації приймає тільки [JSON](https://uk.wikipedia.org/wiki/JSON) формат. Тобто вам необхідно написати [middleware](https://uk.wikipedia.org/wiki/%D0%9F%D1%80%D0%BE%D0%BC%D1%96%D0%B6%D0%BD%D0%B5_%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BD%D0%B5_%D0%B7%D0%B0%D0%B1%D0%B5%D0%B7%D0%BF%D0%B5%D1%87%D0%B5%D0%BD%D0%BD%D1%8F).

Вам необхідно написати функцію `logConverting`, яка приймає на вхід строку логів і повертає строку, яка є валідним JSON обʼєктом. Ключами обʼєкту є дата повідомлення і ідентифікатор серверу, а повідомлення - значенням. Таким чином необхідно створити масив повідомлень для кожного серверу, згруповані по датам (див. приклад).

Лог має наступний формат:

- Порядок записів довільний
- Усі записи починаються з нової строки (розділені символом "\n")
- Кожний елемент запису відбитий символом ";"

Порядок запису наступний:

- Дата, що є записаною в форматі [ISO 8601](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString) (2022-09-27)
- Ідентифікатор серверу
- Текст повідомлення

Обмеження:

- Розмір вхідного логу завжди не більше 2048 символів
- Отримана строка має бути валідним JSON обʼєктом
- Кінцевий обʼєкт мусить бути без "висячих ком", згідно [стандарту JSON](https://www.json.org/json-uk.html)
- Ключ і значення мають бути в лапках (символ ")
- Форматування (відступи) до уваги не береться

**Приклад:**

```js
logConverting(`2020-02-01;S01;Out of memory
2020-02-01;S01;Init inbound network
2020-02-02;S01;Starting server
2020-02-02;S02;Server pending error
2020-02-01;S02;Halt server`);
```

Після конвертації поверне (відступ строк тільки для кращого сприйняття і не впливає на кінцевий результат):

```js
{
  "2020-02-01": {
    "S01": [
      "Out of memory",
      "Init inbound network"
    ],
    "S02": [
      "Halt server"
    ]
  },
  "2020-02-02": {
    "S01": [
      "Starting server"
    ],
    "S02": [
      "Server pending error"
    ]
  }
}
```

<details>
  <summary>Підказка</summary>

___

  Найпростішим способом вирішення цієї задачі є використання вбудованого обʼєкту [JSON](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/JSON), а саме метода [JSON.stringify](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify)

  ## Алгоритм дій

  1. Розібрати строку на масив
  1. Кожний запис розділити на 3 елементи, згідно умови
  1. Для кожної дати перевірити, чи зустрічалась вона раніше і, або створити новий запис, або доповняти попередній
  1. Для кожного ідентифікатору сервера зробити аналогічну перевірку
  1. Додати повідомлення запису в якості значення
  1. Повторити цикл для всіх записів
  1. Повернути отриману строку

</details>
